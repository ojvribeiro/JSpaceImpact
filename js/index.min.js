var rateOfFire,gameStart,morto,life,score,tangivel,moveLength,$canvas,$nave,$ground,bullet=document.querySelector(".bullet");function run(){canvas.desenha(),ground.desenha(),nave._1.desenha(),boss._1.desenha(),enemy.zigzag.desenha(),enemy.linear.desenha(),setTimeout((function(){enemy.zigzag.desenha(),enemy.linear.desenha()}),5e3),gameStart=!0,morto=!1,life=100,tangivel=!0,change("score",score=0),change("life",life)}function invencivel(){tangivel=!1}function change(selector,value){document.querySelector("#"+selector).innerHTML="score"===selector?"score: "+value:"fuselagem: "+value+"%"}function gameOver(message){"win"===message?$("#gameover").html("Você venceu a batalha<br>Clique para reiniciar").show():"lose"===message&&$("#gameover").html("Você foi destruído<br>Clique para reiniciar").show(),$("#canvas").on("click",(function(){document.location.reload()}))}function shoot(){var j=Math.floor(1e4*Math.random());if(gameStart){var bala=document.createElement("div");bala.className="bullet",bala.id="bullet-"+j,bala.style.top=$nave.offsetTop+30+"px",bala.style.left=$nave.offsetLeft+30+"px"}$canvas.appendChild(bala),$("#bullet-"+j).addClass("shot");var hit=setInterval((function(){gameStart&&$(".bullet").is(":visible")&&document.querySelector(".bullet").offsetLeft>$inimigo.offsetLeft&&document.querySelector(".bullet").offsetLeft<$inimigo.offsetLeft+$inimigo.offsetWidth&&document.querySelector(".bullet").offsetTop>$inimigo.offsetTop&&document.querySelector(".bullet").offsetTop<$inimigo.offsetTop+$inimigo.offsetHeight&&(console.log("hit"),$($inimigo).addClass("boss-hit"),setTimeout((function(){$($inimigo).removeClass("boss-hit")}),100),$(".bullet").hasClass("shot")&&(score+=10,$(".bullet").remove()),change("score",score)),gameStart&&$(".bullet").is(":visible")&&document.querySelector(".bullet").offsetLeft>$boss.offsetLeft&&document.querySelector(".bullet").offsetLeft<$boss.offsetLeft+$boss.offsetWidth&&document.querySelector(".bullet").offsetTop>$boss.offsetTop&&document.querySelector(".bullet").offsetTop<$boss.offsetTop+$boss.offsetHeight&&($($boss).addClass("boss-hit"),setTimeout((function(){$($boss).removeClass("boss-hit")}),100),$(".bullet").hasClass("shot")&&(score+=10,$(".bullet").remove()),change("score",score),score>=1e3&&($($boss).fadeOut(),$(".shot").remove(),$(".boss-shot").remove(),$('div[class*="bullet-"]').remove(),gameOver("win"),$($nave).addClass("you-win"),gameStart=!1),clearInterval(hit))}),0),lose=setInterval((function(){var g=Math.floor(1e4*Math.random());gameStart&&$(".bullet").hasClass("shot")&&document.querySelector(".bullet").offsetLeft>$canvas.offsetWidth&&($(".shot").addClass("bullet-"+g),$(".bullet-"+g).addClass("shoted"),$("bullet-"+g).hasClass("shoted")&&$("bullet-"+g).remove(),clearInterval(lose))}),0)}function missile(){var m=Math.floor(1e4*Math.random()),missil=document.createElement("div");missil.className="missile-"+m,missil.style.top=$nave.offsetTop+30+"px",missil.style.left=$nave.offsetLeft+30+"px",$canvas.appendChild(missil),$(".missile-"+m).addClass("missile");var missile_hit=setInterval((function(){(gameStart&&document.querySelector(".missile-"+m).offsetTop>$boss.offsetTop+$boss.offsetHeight||document.querySelector(".missile-"+m).offsetTop>$inimigo.offsetTop+$inimigo.offsetHeight)&&(document.querySelector(".missile-"+m).style.top=document.querySelector(".missile-"+m).offsetTop-30+"px",document.querySelector(".missile-"+m).style.transform="rotate(-45deg)"),gameStart&&document.querySelector(".missile-"+m).offsetTop<$boss.offsetTop||document.querySelector(".missile-"+m).offsetTop<$inimigo.offsetTop?(document.querySelector(".missile-"+m).style.top=document.querySelector(".missile-"+m).offsetTop+30+"px",document.querySelector(".missile-"+m).style.transform="rotate(45deg)"):document.querySelector(".missile-"+m).style.transform="rotate(0deg)"}),100),hit=setInterval((function(){gameStart&&$(".missile-"+m).is(":visible")&&document.querySelector(".missile-"+m).offsetLeft>$inimigo.offsetLeft&&document.querySelector(".missile-"+m).offsetLeft<$inimigo.offsetLeft+$inimigo.offsetWidth&&document.querySelector(".missile-"+m).offsetTop>$inimigo.offsetTop&&document.querySelector(".missile-"+m).offsetTop<$inimigo.offsetTop+$inimigo.offsetHeight&&($($inimigo).addClass("boss-hit"),setTimeout((function(){$($inimigo).removeClass("boss-hit")}),100),$(".missile-"+m).hasClass("missile")&&(score+=10,$(".missile-"+m).remove()),change("score",score),clearInterval(hit),clearInterval(missile_hit)),gameStart&&$(".missile-"+m).is(":visible")&&document.querySelector(".missile-"+m).offsetLeft>$boss.offsetLeft&&document.querySelector(".missile-"+m).offsetLeft<$boss.offsetLeft+$boss.offsetWidth&&document.querySelector(".missile-"+m).offsetTop>$boss.offsetTop&&document.querySelector(".missile-"+m).offsetTop<$boss.offsetTop+$boss.offsetHeight&&($($boss).addClass("boss-hit"),setTimeout((function(){$($boss).removeClass("boss-hit")}),100),$(".missile-"+m).hasClass("missile")&&(score+=10,$(".missile-"+m).remove()),change("score",score),score>=1e3&&($($boss).fadeOut(),$(".shot").remove(),$(".boss-shot").remove(),$('div[class*="missile-"]').remove(),gameOver("win"),$($nave).addClass("you-win"),gameStart=!1),clearInterval(hit),clearInterval(missile_hit))}),0),lose=setInterval((function(){gameStart&&$(".missile-"+m).hasClass("missile")&&document.querySelector(".missile-"+m).offsetLeft>$canvas.offsetWidth&&($(".missile-"+m).remove(),clearInterval(lose),clearInterval(missile_hit))}),0)}function bossShoot(){var i=Math.floor(1e4*Math.random()),b=Math.floor(135*Math.random());if(gameStart){var bala=document.createElement("div");bala.className="enemy-bullet-"+i,bala.style.top=$boss.offsetTop+b+"px",bala.style.left=$boss.offsetLeft+70+"px",$canvas.appendChild(bala),$(".enemy-bullet-"+i).addClass("boss-shot")}var hitOnMe=setInterval((function(){if(!(gameStart&&tangivel&&$(".enemy-bullet-"+i).is(":visible")&&document.querySelector(".enemy-bullet-"+i).offsetLeft>$nave.offsetLeft&&document.querySelector(".enemy-bullet-"+i).offsetLeft<$nave.offsetLeft+$nave.offsetWidth&&document.querySelector(".enemy-bullet-"+i).offsetTop>$nave.offsetTop+10&&document.querySelector(".enemy-bullet-"+i).offsetTop<$nave.offsetTop+($nave.offsetHeight-10)))return!1;$(".enemy-bullet-"+i).removeClass("boss-shot"),$($nave).addClass("player-hit"),setTimeout((function(){$($nave).removeClass("player-hit")}),100),change("life",life-=nave._1.damage.bullet.boss),clearInterval(hitOnMe),setTimeout((function(){life<=0&&(morto=!0,gameStart=!1,$('div[class*="bullet-"]').remove(),gameOver("lose"),playerExplosionEffect(),change("life",0))}),100)}),50),lose2=setInterval((function(){$(".enemy-bullet-"+i).is(":visible")&&document.querySelector(".enemy-bullet-"+i).offsetLeft<0&&($(".enemy-bullet-"+i).remove(),clearInterval(lose2))}),0)}function special(){missile()}canvas={width:720,height:480,desenha:function(){var c=document.createElement("div");c.id="canvas",c.style.width=this.width+"px",c.style.height=this.height+"px",document.querySelector("#content").appendChild(c),$canvas=document.querySelector("#"+c.id)}},ground={desenha:function(){var g=document.createElement("div");g.id="chao",$canvas.appendChild(g),$ground=document.querySelector("#"+g.id)}},nave={_1:{id:"nave-1",class:"nave",name:"Geneva",sprite:"nave.png",diameter:60,moveLength:20,damage:{bullet:{enemy:3,boss:7},missile:40,laser:80,collision:{enemy:15,boss:30,ground:100}},rateOfFire:900,desenha:function(){var n=document.createElement("div");n.id=this.id,n.className=this.class,n.style.width=this.diameter+"px",n.style.height=this.diameter+"px",n.style.backgroundImage="url(img/"+this.sprite+")",$canvas.appendChild(n),$nave=document.querySelector("."+this.class),moveLength=this.moveLength}}},enemy={zigzag:{class:"inimigo zigzag",desenha:function(){var e=Math.floor(1e4*Math.random()),i=document.createElement("div");i.className=this.class,i.id="zigzag-"+e,$canvas.appendChild(i),$inimigo=document.querySelector(".inimigo"),setInterval((function(){var vx=document.querySelector("#zigzag-"+e).offsetLeft+document.querySelector("#zigzag-"+e).offsetWidth/2-($nave.offsetLeft+$nave.offsetWidth/2),vy=document.querySelector("#zigzag-"+e).offsetTop+document.querySelector("#zigzag-"+e).offsetHeight/2-($nave.offsetTop+$nave.offsetHeight/2),totalRadii=$nave.offsetWidth/2+document.querySelector("#zigzag-"+e).offsetWidth/2,magnitude=Math.sqrt(vx*vx+vy*vy);enemyCollision(magnitude,totalRadii)}),200)}},linear:{class:"inimigo linear",desenha:function(){var e=Math.floor(1e4*Math.random()),f=Math.floor(250*Math.random()),i=document.createElement("div");i.className=this.class,i.id="linear-"+e,i.style.top=f+"px",$canvas.appendChild(i),$inimigo=document.querySelector(".inimigo"),setInterval((function(){var vx=document.querySelector("#linear-"+e).offsetLeft+document.querySelector("#linear-"+e).offsetWidth/2-($nave.offsetLeft+$nave.offsetWidth/2),vy=document.querySelector("#linear-"+e).offsetTop+document.querySelector("#linear-"+e).offsetHeight/2-($nave.offsetTop+$nave.offsetHeight/2),totalRadii=$nave.offsetWidth/2+document.querySelector("#linear-"+e).offsetWidth/2,magnitude=Math.sqrt(vx*vx+vy*vy);enemyCollision(magnitude,totalRadii)}),200)}}},boss={_1:{id:"boss-1",class:"boss",name:"",sprite:"",diameter:135,damage:{bullet:1,missile:20,laser:30,annihilation:70,player:5},rateOfFire:1e3,desenha:function(){var b=document.createElement("div");b.id=this.id,b.className=this.class,b.style.width=this.diameter+"px",b.style.height=this.diameter+"px",b.style.right="20px",b.style.backgroundImage="url(img/"+this.sprite+")",rateOfFire=this.rateOfFire,$canvas.appendChild(b),$boss=document.querySelector(".boss"),setInterval((function(){var vx=document.querySelector(".boss").offsetLeft+document.querySelector(".boss").offsetWidth/2-($nave.offsetLeft+$nave.offsetWidth/2),vy=document.querySelector(".boss").offsetTop+document.querySelector(".boss").offsetHeight/2-($nave.offsetTop+$nave.offsetHeight/2),totalRadii=$nave.offsetWidth/2+document.querySelector(".boss").offsetWidth/2,magnitude=Math.sqrt(vx*vx+vy*vy);bossCollision(magnitude,totalRadii)}),200)}}},run(),setInterval((function(){gameStart&&$nave.offsetTop>$boss.offsetTop&&$nave.offsetTop<$boss.offsetTop+$boss.offsetHeight&&setTimeout((function(){bossShoot()}),100)}),rateOfFire),$canvas.addEventListener("mousedown",(function(event){if(gameStart)switch(event.which){case 1:shoot();var mousedown=setInterval((function(){shoot()}),nave._1.rateOfFire);$canvas.addEventListener("mouseup",(function(){clearInterval(mousedown)}));break;case 3:special()}})),$(document).on("contextmenu",(function(){return!1}));